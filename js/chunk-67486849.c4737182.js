(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67486849","chunk-739bdef5","chunk-2d0bae0a","chunk-2d0d0a41"],{"2f95":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",{class:{"page-compact":e.crud.pageOptions.compact}},[n("template",{slot:"header"},[e._v("图片裁剪上传 "),n("example-helper",{attrs:{title:"帮助说明"}},[n("link-button",{attrs:{href:"http://greper.gitee.io/d2-crud-plus/guide/extends/avatar-cropper.html"}},[e._v("帮助说明")])],1)],1),n("d2-crud-x",e._g(e._b({ref:"d2Crud"},"d2-crud-x",e._crudProps,!1),e._crudListeners),[n("div",{attrs:{slot:"header"},slot:"header"},[n("crud-search",{ref:"search",attrs:{options:e.crud.searchOptions},on:{submit:e.handleSearch}}),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 新增")]),n("crud-toolbar",e._g(e._b({},"crud-toolbar",e._crudToolbarProps,!1),e._crudToolbarListeners))],1)])],2)},o=[],a=n("6628"),c=n("38a0"),u=n("1fbf"),p=n("699a"),s={name:"formUploader",components:{},mixins:[u["d2CrudPlus"].crud],data:function(){return{helper:p["default"]}},computed:{helperHeight:function(){var e=document.documentElement.clientHeight-100;return e+"px"}},methods:{getCrudOptions:function(){return Object(c["crudOptions"])(this)},pageRequest:function(e){return Object(a["GetList"])(e)},addRequest:function(e){return Object(a["AddObj"])(e)},updateRequest:function(e){return console.log("row",e),Object(a["UpdateObj"])(e)},delRequest:function(e){return Object(a["DelObj"])(e.id)}}},i=s,d=n("2877"),l=function(e){e.options.__source="src/business/modules/example/views/form/cropper/index.vue"},m=l,h=Object(d["a"])(i,r,o,!1,null,null,null);"function"===typeof m&&m(h);t["default"]=h.exports},"38a0":function(e,t,n){"use strict";n.r(t),n.d(t,"crudOptions",(function(){return r}));var r=function(e){return{options:{height:"100%"},searchOptions:{disabled:!0,show:null},columns:[{title:"ID",key:"id",width:90,form:{disabled:!0}},{title:"头像裁剪",key:"avatar",type:"avatar-cropper",form:{valueChange:function(e,t,n,r){console.log("avatar chagned",e,t)}}},{title:"支持多个",key:"multi",type:"avatar-cropper",align:"left",form:{component:{props:{limit:5}},helper:"可上传5张图片"}},{title:"其他比例",key:"aspectRatio",type:"avatar-cropper",form:{component:{props:{cropper:{aspectRatio:16/9}}},helper:"16 / 9"}},{title:"阿里云",key:"alioss",type:"avatar-cropper",form:{component:{props:{type:"alioss"}},helper:"上传到阿里云oss"}},{title:"七牛",key:"qiniu",type:"avatar-cropper",form:{component:{props:{type:"qiniu"}},helper:"上传到七牛"}},{title:"本地服务器",key:"local",type:"avatar-cropper",form:{component:{props:{uploader:{type:"form",action:"http://81.68.100.43:7070/api/upload/form/upload",name:"file"}}},helper:"上传到本地服务器"}}]}}},6628:function(e,t,n){"use strict";n.r(t),n.d(t,"GetList",(function(){return o})),n.d(t,"AddObj",(function(){return a})),n.d(t,"UpdateObj",(function(){return c})),n.d(t,"DelObj",(function(){return u}));var r=n("f58c");function o(e){return Object(r["a"])({url:"/cropper/page",method:"get",data:e})}function a(e){return Object(r["a"])({url:"/cropper/add",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/cropper/update",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/cropper/delete",method:"post",data:{id:e}})}},"699a":function(e,t,n){"use strict";n.r(t),t["default"]={init:"  import Vue from 'vue'\n  import d2Crud from 'd2-crud-x'\n  import { d2CrudPlus } from 'd2-crud-plus'\n  import { D2pFileUploader } from 'd2p-extends'\n  // 安装扩展插件\nVue.use(D2pFileUploader, {\n  d2CrudPlus,\n  defaultType: 'cos', //默认使用腾讯云\n  cos: { //腾讯云cos配置\n    domain: 'https://d2p-demo-1251260344.cos.ap-guangzhou.myqcloud.com',\n    bucket: 'd2p-demo-1251260344',\n    region: 'ap-guangzhou',\n    secretId: '', //\n    secretKey: '', // 传了secretKey 和secretId 代表使用本地签名模式（不安全，生产环境不推荐）\n    getAuthorization  (custom) { // 不传secretKey代表使用临时签名模式,此时此参数必传（安全，生产环境推荐）\n      return request({ //请求后端获取sts授权\n        url: '/upload/cos/getAuthorization',\n        method: 'get'\n      }).then(ret => {\n        // 返回结构如下\n        // ret.data:{\n        //   TmpSecretId,\n        //   TmpSecretKey,\n        //   XCosSecurityToken,\n        //   ExpiredTime, // SDK 在 ExpiredTime 时间前，不会再次调用 getAuthorization\n        // }\n        return ret.data\n      })\n    }\n  },\n  alioss: { //阿里云oss配置\n    domain: 'https://d2p-demo.oss-cn-shenzhen.aliyuncs.com',\n    bucket: 'd2p-demo',\n    region: 'oss-cn-shenzhen',\n    accessKeyId: '',\n    accessKeySecret: '',\n    getAuthorization  (custom, context) { // 不传accessKeySecret代表使用临时签名模式,此时此参数必传（安全，生产环境推荐）\n      return request({ //请求后端获取sts授权\n        url: '/upload/alioss/getAuthorization',\n        method: 'get'\n      }).then(ret => {\n        return ret.data\n      })\n    }\n  },\n  qiniu: {\n    bucket: 'd2p-demo',\n    getToken (custom) {\n      return request({ //请求后端获取token\n        url: '/upload/qiniu/getToken',\n        method: 'get'\n      }).then(ret => {\n        return ret.data // {token:xxx,expires:xxx}\n      })\n    },\n    domain: 'http://pzrsldiu3.bkt.clouddn.com'\n  }\n})\n\n  ",crud:"export const crudOptions = {\n  columns: [\n    {\n      title: '头像',\n      key: 'avatar',\n      type: 'avatar-cropper',\n      width: 200,\n      form: {\n        props:{\n          accept:'', // 支持的文件类型\n          dialogWidth:'50%', //对话框宽度\n          cropperHeight: '', //裁剪框高度，默认为浏览器视窗的40%\n          cropper:{}, //裁剪组件参数，请参考https://github.com/fengyuanchen/cropperjs\n          limit: 1, //限制数量，默认为1\n          maxSize: 5, //限制单个文件大小，0为不限制\n        }\n      }\n    }\n  ]\n}\n\n",template:"\n  "}},f58c:function(e,t,n){"use strict";var r=n("22ce"),o=r["c"];t["a"]=o}}]);